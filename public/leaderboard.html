<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Leaderboard - SkyBattle Network</title>
  <meta name="description" content="Check your ranking, view top players on SkyBattle Network. The ultimate competitive PvP network in Asia.">
  <meta name="theme-color" content="#8b5cf6">
  
  <!-- Open Graph / Discord Embed -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://skybattle.onrender.com/leaderboard">
  <meta property="og:title" content="SkyBattle - Leaderboards">
  <meta property="og:description" content="Check your ranking, view top players on SkyBattle Network. The ultimate competitive PvP network in Asia.">
  <meta property="og:image" content="https://skybattle.onrender.com/images/logo.png">
  <meta property="og:site_name" content="SkyBattle">
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="SkyBattle - Leaderboards">
  <meta name="twitter:description" content="Check your ranking, view top players on SkyBattle Network. The ultimate competitive PvP network in Asia.">
  <meta name="twitter:image" content="https://skybattle.onrender.com/images/logo.png">
  
  <link rel="icon" href="/images/logo.png">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      background: #0a0a0f;
      min-height: 100vh;
      color: #fff;
      font-family: 'Inter', sans-serif;
      overflow-x: hidden;
    }
    
    .bg-gradient {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at 30% 0%, rgba(59, 130, 246, 0.12) 0%, transparent 50%),
                  radial-gradient(ellipse at 70% 100%, rgba(6, 182, 212, 0.08) 0%, transparent 50%),
                  #0a0a0f;
      z-index: -1;
    }
    
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 50px;
      position: fixed;
      width: 100%;
      top: 0;
      z-index: 1000;
      background: rgba(10, 10, 15, 0.8);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    
    .nav-brand {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
    }
    
    .nav-brand img { height: 40px; border-radius: 10px; }
    .nav-brand-text h1 { font-size: 18px; font-weight: 700; color: #fff; }
    .nav-brand-text span { font-size: 10px; color: #666; letter-spacing: 3px; }
    
    .nav-links {
      display: flex;
      gap: 5px;
      background: rgba(255,255,255,0.05);
      padding: 5px;
      border-radius: 25px;
      border: 1px solid rgba(255,255,255,0.08);
    }
    
    .nav-links a {
      padding: 10px 20px;
      border-radius: 20px;
      text-decoration: none;
      color: #888;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s;
    }
    
    .nav-links a:hover { color: #fff; }
    .nav-links a.active { background: rgba(255,255,255,0.1); color: #fff; }
    
    .nav-right { display: flex; gap: 10px; }
    
    .nav-btn {
      padding: 10px 20px;
      border-radius: 20px;
      text-decoration: none;
      font-size: 13px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s;
    }
    
    .nav-btn.discord {
      background: linear-gradient(135deg, #5865F2, #7c3aed);
      color: #fff;
      box-shadow: 0 4px 20px rgba(88, 101, 242, 0.4);
    }
    
    .nav-btn.discord:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 25px rgba(88, 101, 242, 0.5);
    }
    
    .nav-btn svg { width: 18px; height: 18px; fill: currentColor; }
    
    .main-content {
      padding: 100px 50px 50px;
      max-width: 1100px;
      margin: 0 auto;
    }
    
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    .header-left h1 {
      font-size: 38px;
      font-weight: 800;
      margin-bottom: 8px;
    }
    
    .header-left h1 span { color: #60a5fa; }
    .header-left p { color: #666; font-size: 14px; }
    
    .header-badges {
      display: flex;
      gap: 10px;
      margin-top: 15px;
      flex-wrap: wrap;
    }
    
    .badge {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 14px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .badge.players {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(6, 182, 212, 0.2));
      border: 1px solid rgba(59, 130, 246, 0.3);
      color: #60a5fa;
    }
    
    .badge.season {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      color: #888;
    }
    
    .badge svg { width: 14px; height: 14px; fill: currentColor; }
    
    .header-right {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: flex-end;
    }
    
    .search-box { position: relative; }
    
    .search-box input {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 12px;
      padding: 12px 16px 12px 42px;
      color: #fff;
      font-size: 14px;
      width: 250px;
      transition: all 0.3s;
    }
    
    .search-box input:focus {
      outline: none;
      border-color: rgba(59, 130, 246, 0.5);
      background: rgba(59, 130, 246, 0.1);
    }
    
    .search-box input::placeholder { color: #666; }
    
    .search-box svg {
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      width: 18px;
      height: 18px;
      fill: #666;
    }
    
    .leaderboard-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }
    
    .lb-tab {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 10px 18px;
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 25px;
      color: #888;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .lb-tab:hover {
      background: rgba(255,255,255,0.06);
      color: #fff;
    }
    
    .lb-tab.active {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(6, 182, 212, 0.2));
      border-color: rgba(59, 130, 246, 0.4);
      color: #60a5fa;
    }
    
    .lb-tab svg { width: 16px; height: 16px; fill: currentColor; }
    
    .leaderboard-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .lb-loading {
      text-align: center;
      color: #666;
      padding: 60px;
      font-size: 14px;
    }
    
    .lb-row {
      display: flex;
      align-items: center;
      gap: 15px;
      background: rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 14px;
      padding: 16px 22px;
      transition: all 0.3s;
    }
    
    .lb-row:hover {
      background: rgba(255,255,255,0.04);
      border-color: rgba(59, 130, 246, 0.3);
      transform: translateX(5px);
    }
    
    .lb-row.top-1 {
      background: linear-gradient(135deg, rgba(250, 204, 21, 0.1), rgba(245, 158, 11, 0.05));
      border-color: rgba(250, 204, 21, 0.3);
    }
    
    .lb-row.top-2 {
      background: linear-gradient(135deg, rgba(156, 163, 175, 0.1), rgba(107, 114, 128, 0.05));
      border-color: rgba(156, 163, 175, 0.3);
    }
    
    .lb-row.top-3 {
      background: linear-gradient(135deg, rgba(217, 119, 6, 0.1), rgba(180, 83, 9, 0.05));
      border-color: rgba(217, 119, 6, 0.3);
    }
    
    .lb-rank {
      font-size: 16px;
      font-weight: 700;
      color: #666;
      width: 35px;
      text-align: center;
    }
    
    .lb-row.top-1 .lb-rank { color: #fbbf24; }
    .lb-row.top-2 .lb-rank { color: #9ca3af; }
    .lb-row.top-3 .lb-rank { color: #d97706; }
    
    .lb-avatar {
      width: 48px;
      height: 48px;
      border-radius: 12px;
    }
    
    .lb-player { flex: 1; }
    
    .lb-player h4 {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 3px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .lb-player h4 .crown { 
      width: 18px; 
      height: 18px; 
      fill: #fbbf24;
    }
    
    .lb-player span {
      font-size: 11px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .lb-stats {
      display: flex;
      gap: 30px;
      align-items: center;
    }
    
    .lb-stat { text-align: right; min-width: 70px; }
    
    .lb-stat-label {
      font-size: 10px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 2px;
    }
    
    .lb-stat-value {
      font-size: 14px;
      font-weight: 600;
      color: #fff;
    }
    
    .lb-stat-value.money { color: #22c55e; }
    .lb-stat-value.kills { color: #ef4444; }
    .lb-stat-value.deaths { color: #f97316; }
    .lb-stat-value.playtime { color: #60a5fa; }
    
    .footer {
      padding: 25px 50px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-top: 1px solid rgba(255,255,255,0.05);
      max-width: 1100px;
      margin: 50px auto 0;
    }
    
    .footer-left {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #666;
      font-size: 13px;
    }
    
    .footer-left img { height: 22px; opacity: 0.5; border-radius: 5px; }
    
    .footer-links { display: flex; gap: 25px; }
    
    .footer-links a {
      color: #666;
      text-decoration: none;
      font-size: 11px;
      font-weight: 500;
      letter-spacing: 1px;
      transition: all 0.3s;
    }
    
    .footer-links a:hover { color: #60a5fa; }
    
    @media (max-width: 900px) {
      .navbar { padding: 15px 20px; flex-wrap: wrap; gap: 15px; }
      .nav-links { display: none; }
      .main-content { padding: 100px 20px 30px; }
      .page-header { flex-direction: column; align-items: flex-start; }
      .header-right { align-items: flex-start; width: 100%; }
      .search-box input { width: 100%; }
      .lb-stats { gap: 15px; flex-wrap: wrap; }
      .lb-stat { min-width: 50px; }
      .footer { flex-direction: column; gap: 15px; text-align: center; padding: 25px 20px; }
    }
  </style>
</head>
<body>
  <div class="bg-gradient"></div>
  
  <nav class="navbar">
    <a href="/" class="nav-brand">
      <img src="/images/logo.png" alt="Logo">
      <div class="nav-brand-text">
        <h1>SkyBattle</h1>
        <span>NETWORK</span>
      </div>
    </a>
    <div class="nav-links">
      <a href="/">Home</a>
      <a href="/leaderboard" class="active">Leaderboard</a>
      <a href="/rules">Rules</a>
      <a href="/vote">Vote</a>
      <a href="/store">Store</a>
    </div>
    <div class="nav-right">
      <a href="https://discord.gg/3BhxMG4P4n" target="_blank" class="nav-btn discord">
        <svg viewBox="0 0 24 24"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128c.126-.094.252-.192.373-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/></svg>
        Discord
      </a>
    </div>
  </nav>

  <main class="main-content">
    <div class="page-header">
      <div class="header-left">
        <h1>Economy <span>Season 1</span></h1>
        <p>Official Season Leaderboard</p>
        <div class="header-badges">
          <div class="badge players">
            <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
            <span id="totalPlayers">0 Players</span>
          </div>
          <div class="badge season">
            <svg viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg>
            Season Ends: TBA
          </div>
        </div>
      </div>
      <div class="header-right">
        <div class="search-box">
          <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
          <input type="text" id="playerSearch" placeholder="Search player..." onkeyup="filterLeaderboard()">
        </div>
      </div>
    </div>
    
    <div class="leaderboard-tabs">
      <button class="lb-tab active" data-type="money">
        <svg viewBox="0 0 24 24"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>
        Money
      </button>
      <button class="lb-tab" data-type="kills">
        <svg viewBox="0 0 24 24"><path d="M14.5 3L6 12l3 3 9-9-3.5-3z M6 12l-3 9 9-3"/></svg>
        Kills
      </button>
      <button class="lb-tab" data-type="deaths">
        <svg viewBox="0 0 24 24"><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"/></svg>
        Deaths
      </button>
      <button class="lb-tab" data-type="playtime">
        <svg viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg>
        Playtime
      </button>
    </div>
    
    <div class="leaderboard-list" id="leaderboardList">
      <div class="lb-loading">Loading leaderboard...</div>
    </div>
  </main>

  <footer class="footer">
    <div class="footer-left">
      <img src="/images/logo.png" alt="Logo">
      <span>SkyBattle Network 2026</span>
    </div>
    <div class="footer-links">
      <a href="/">HOME</a>
      <a href="/store">STORE</a>
      <a href="https://discord.gg/3BhxMG4P4n" target="_blank">DISCORD</a>
    </div>
  </footer>

  <script>
    let currentLeaderboardType = 'money';
    let leaderboardData = [];
    
    document.addEventListener('DOMContentLoaded', function() {
      loadLeaderboard('money');
      setupLeaderboardTabs();
      setInterval(function() { loadLeaderboard(currentLeaderboardType); }, 30000);
    });
    
    function setupLeaderboardTabs() {
      document.querySelectorAll('.lb-tab').forEach(function(tab) {
        tab.addEventListener('click', function() {
          document.querySelectorAll('.lb-tab').forEach(function(t) { t.classList.remove('active'); });
          tab.classList.add('active');
          currentLeaderboardType = tab.dataset.type;
          loadLeaderboard(currentLeaderboardType);
        });
      });
    }
    
    async function loadLeaderboard(type) {
      try {
        const res = await fetch('/api/leaderboard/' + type + '?limit=100');
        const data = await res.json();
        leaderboardData = data.players || [];
        document.getElementById('totalPlayers').textContent = leaderboardData.length + ' Players';
        renderLeaderboard(leaderboardData, type);
      } catch (e) {
        console.log('Failed to load leaderboard:', e);
        document.getElementById('leaderboardList').innerHTML = '<div class="lb-loading">Failed to load leaderboard</div>';
      }
    }
    
    function renderLeaderboard(players, type) {
      const list = document.getElementById('leaderboardList');
      
      if (!players || players.length === 0) {
        list.innerHTML = '<div class="lb-loading">No players found. Stats will appear when players join the server.</div>';
        return;
      }
      
      let html = '';
      for (let i = 0; i < players.length; i++) {
        const player = players[i];
        const rank = i + 1;
        const topClass = rank <= 3 ? 'top-' + rank : '';
        const crown = rank === 1 ? '<svg class="crown" viewBox="0 0 24 24"><path d="M5 16L3 5l5.5 5L12 4l3.5 6L21 5l-2 11H5zm14 3c0 .6-.4 1-1 1H6c-.6 0-1-.4-1-1v-1h14v1z"/></svg>' : '';
        
        html += '<div class="lb-row ' + topClass + '">';
        html += '<div class="lb-rank">#' + rank + '</div>';
        html += '<img class="lb-avatar" src="https://mc-heads.net/avatar/' + player.username + '/48" alt="' + player.username + '">';
        html += '<div class="lb-player">';
        html += '<h4>' + player.username + ' ' + crown + '</h4>';
        html += '<span>STREAK: ' + (player.streak || 0) + '</span>';
        html += '</div>';
        html += '<div class="lb-stats">';
        html += '<div class="lb-stat"><div class="lb-stat-label">Kills</div><div class="lb-stat-value kills">' + formatNumber(player.kills) + '</div></div>';
        html += '<div class="lb-stat"><div class="lb-stat-label">Deaths</div><div class="lb-stat-value deaths">' + formatNumber(player.deaths) + '</div></div>';
        html += '<div class="lb-stat"><div class="lb-stat-label">Playtime</div><div class="lb-stat-value playtime">' + formatPlaytime(player.playtime) + '</div></div>';
        html += '<div class="lb-stat"><div class="lb-stat-label">Balance</div><div class="lb-stat-value money">' + formatMoney(player.money) + '</div></div>';
        html += '</div>';
        html += '</div>';
      }
      list.innerHTML = html;
    }
    
    function filterLeaderboard() {
      const search = document.getElementById('playerSearch').value.toLowerCase();
      const filtered = leaderboardData.filter(function(p) {
        return p.username.toLowerCase().includes(search);
      });
      renderLeaderboard(filtered, currentLeaderboardType);
    }
    
    function formatMoney(amount) {
      if (amount >= 1000000) return '\u0024' + (amount / 1000000).toFixed(2) + 'M';
      if (amount >= 1000) return '\u0024' + (amount / 1000).toFixed(2) + 'k';
      return '\u0024' + (amount || 0).toFixed(2);
    }
    
    function formatNumber(num) {
      return (num || 0).toLocaleString();
    }
    
    function formatPlaytime(minutes) {
      if (!minutes) return '0m';
      const hours = Math.floor(minutes / 60);
      const mins = minutes % 60;
      if (hours > 0) return hours + 'h ' + mins + 'm';
      return mins + 'm';
    }
  </script>
</body>
</html>